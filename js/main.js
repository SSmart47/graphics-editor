var Registrated,TitleOfChoosed=document.getElementById("id_title_of_choosed"),content=document.getElementById("id_ge_content"),NAVBAR=document.getElementById("id_main_navbar"),type="cursor",lineDrawind=!1,circleDrawind=!1,rectangleDrawind=!1,isDrawind=!1,dash_array="1 0",MouseLastX=-1,MouseLastY=-1;function Undo(){var e=content.lastElementChild;null!=e&&e.remove()}function ChangedNum(e){var t=document.getElementById(e),e=t.value;""==e&&(e=t.value="0"),parseFloat(e)<0&&(t.value="0")}function MFX(){return 0}function MFY(){return-(NAVBAR.clientHeight+1)}function GetMouseX(){return window.event.clientX+MFX()}function GetMouseY(){return window.event.clientY+MFY()}function NewDashArray(){dash_array=document.getElementById("id_new_ln").value+" "+document.getElementById("id_new_il").value,document.getElementById("id_show_type").setAttribute("stroke-dasharray",dash_array)}function ABS(e){return e<0&&(e*=-1),e}function MIN(e,t){return e<t?e:t}function MAX(e,t){return t<e?e:t}function UpdateCircle(){var e=GetMouseX(),t=GetMouseY(),n=parseFloat(ABS(e-MouseLastX)),o=parseFloat(ABS(t-MouseLastY)),d=parseFloat(MIN(e,MouseLastX))+n/2,e=parseFloat(MIN(t,MouseLastY))+o/2,t=document.getElementById("id_cur_circle");t.setAttribute("cx",d),t.setAttribute("cy",e),t.setAttribute("rx",n/2),t.setAttribute("ry",o/2)}function UpdateRectangle(){var e=GetMouseX(),t=GetMouseY(),n=MIN(e,MouseLastX),o=MIN(t,MouseLastY),d=parseFloat(ABS(e-MouseLastX)),e=parseFloat(ABS(t-MouseLastY)),t=document.getElementById("id_cur_rectangle");t.setAttribute("x",n),t.setAttribute("y",o),t.setAttribute("width",d),t.setAttribute("height",e)}function MousePressed(){var e,t,n,o,d,i=GetMouseX(),l=GetMouseY();"point"==type?(o=document.getElementById("id_point_color").value,d=parseFloat(document.getElementById("id_point_size").value),content.innerHTML+='<circle cx="'+i+'" cy="'+l+'" r="'+d/2+'" fill="'+o+'"></circle>'):"line"==type?(o=document.getElementById("id_line_color").value,d=parseFloat(document.getElementById("id_line_width").value),MouseLastX=parseFloat(i),MouseLastY=parseFloat(l),content.innerHTML+='<line id="id_cur_line" x1="'+i+'" y1="'+l+'" x2="'+i+'" y2="'+l+'" stroke="'+o+'" stroke-width="'+d+'" stroke-dasharray="'+dash_array+'" />',lineDrawind=!0):"circle"==type?(e=document.getElementById("id_circle_color").value,t=parseFloat(document.getElementById("id_circle_width").value),n=document.getElementById("id_circle_fill").value,MouseLastX=parseFloat(i),MouseLastY=parseFloat(l),content.innerHTML+='<ellipse id="id_cur_circle" cx="'+i+'" cy="'+l+'" r="0" stroke="'+e+'" stroke-width="'+t+'" stroke-dasharray="'+dash_array+'" fill="'+n+'" />',circleDrawind=!0):"rectangle"==type?(e=document.getElementById("id_rectangle_color").value,t=parseFloat(document.getElementById("id_rectangle_width").value),n=document.getElementById("id_rectangle_fill").value,MouseLastX=parseFloat(i),MouseLastY=parseFloat(l),content.innerHTML+='<rect id="id_cur_rectangle" x="'+i+'" y="'+l+'" width="0" height="0" stroke="'+e+'" stroke-width="'+t+'" stroke-dasharray="'+dash_array+'" fill="'+n+'" />',rectangleDrawind=!0):"draw"==type&&(o=document.getElementById("id_draw_color").value,d=parseFloat(document.getElementById("id_draw_width").value),MouseLastX=parseFloat(i),MouseLastY=parseFloat(l),content.innerHTML+='<polyline id="id_cur_polyline" points="'+i+","+l+'" stroke="'+o+'" stroke-width="'+d+'" stroke-dasharray="'+dash_array+'" fill="none" />',isDrawind=!0)}function MouseMoved(){var e,t;lineDrawind?((t=document.getElementById("id_cur_line")).setAttribute("x2",GetMouseX()),t.setAttribute("y2",GetMouseY())):circleDrawind?UpdateCircle():rectangleDrawind?UpdateRectangle():isDrawind&&(t=(e=document.getElementById("id_cur_polyline")).getAttribute("points"),e.setAttribute("points",t+" "+GetMouseX()+","+GetMouseY()))}function MouseReleased(){var e;"line"==type?(lineDrawind=!1,(e=document.getElementById("id_cur_line")).setAttribute("x2",GetMouseX()),e.setAttribute("y2",GetMouseY()),e.setAttribute("id","")):"circle"==type?(circleDrawind=!1,e=document.getElementById("id_cur_circle"),UpdateCircle(),e.setAttribute("id","")):"rectangle"==type?(rectangleDrawind=!1,e=document.getElementById("id_cur_rectangle"),UpdateRectangle(),e.setAttribute("id","")):"draw"==type&&(isDrawind=!1,(e=document.getElementById("id_cur_polyline")).setAttribute("id",""))}function UpdateTools(){"cursor"==type?(document.getElementById("id_toolplace_1").innerHTML="",document.getElementById("id_toolplace_2").innerHTML="",document.getElementById("id_toolplace_3").innerHTML="",document.getElementById("id_toolplace_4").innerHTML=""):"point"==type?(document.getElementById("id_toolplace_1").innerHTML='Color<input id="id_point_color" type="color" class="css-color">',document.getElementById("id_toolplace_2").innerHTML='Size<input id="id_point_size" type="number" value="1" onchange="ChangedNum(\'id_point_size\')" class="css-number">',document.getElementById("id_toolplace_3").innerHTML="",document.getElementById("id_toolplace_4").innerHTML=""):"line"==type?(dash_array="1 0",document.getElementById("id_toolplace_1").innerHTML='Color<input id="id_line_color" type="color" class="css-color">',document.getElementById("id_toolplace_2").innerHTML='Width<input id="id_line_width" type="number" value="1" onchange="ChangedNum(\'id_line_width\')" class="css-number">',document.getElementById("id_toolplace_3").innerHTML='<button id="id_datype" class="btn-secondary css-btn-type" data-toggle="modal" data-target="#ModalChooseBorderType"><svg class="css-svg-ln"><line id="id_show_type" x1="10" y1="5" x2="290" y2="5" stroke="white" stroke-width="2" stroke-dasharray="1 0"></line></svg></button>',document.getElementById("id_toolplace_4").innerHTML=""):"circle"==type?(dash_array="1 0",document.getElementById("id_toolplace_1").innerHTML='Border Color<input id="id_circle_color" type="color" class="css-color">',document.getElementById("id_toolplace_2").innerHTML='Border Width<input id="id_circle_width" type="number" value="1" onchange="ChangedNum(\'id_circle_width\')" class="css-number">',document.getElementById("id_toolplace_3").innerHTML='<button id="id_datype" class="btn-secondary css-btn-type" data-toggle="modal" data-target="#ModalChooseBorderType"><svg class="css-svg-ln"><line id="id_show_type" x1="10" y1="5" x2="290" y2="5" stroke="white" stroke-width="2" stroke-dasharray="1 0"></line></svg></button>',document.getElementById("id_toolplace_4").innerHTML='Color<input id="id_circle_fill" type="color" class="css-color">'):"rectangle"==type?(dash_array="1 0",document.getElementById("id_toolplace_1").innerHTML='Border Color<input id="id_rectangle_color" type="color" class="css-color">',document.getElementById("id_toolplace_2").innerHTML='Border Width<input id="id_rectangle_width" type="number" value="1" onchange="ChangedNum(\'id_rectangle_width\')" class="css-number">',document.getElementById("id_toolplace_3").innerHTML='<button id="id_datype" class="btn-secondary css-btn-type" data-toggle="modal" data-target="#ModalChooseBorderType"><svg class="css-svg-ln"><line id="id_show_type" x1="10" y1="5" x2="290" y2="5" stroke="white" stroke-width="2" stroke-dasharray="1 0"></line></svg></button>',document.getElementById("id_toolplace_4").innerHTML='Color<input id="id_rectangle_fill" type="color" class="css-color">'):"draw"==type&&(dash_array="1 0",document.getElementById("id_toolplace_1").innerHTML='Color<input id="id_draw_color" type="color" class="css-color">',document.getElementById("id_toolplace_2").innerHTML='Width<input id="id_draw_width" type="number" value="1" onchange="ChangedNum(\'id_draw_width\')" class="css-number">',document.getElementById("id_toolplace_3").innerHTML='<button id="id_datype" class="btn-secondary css-btn-type" data-toggle="modal" data-target="#ModalChooseBorderType"><svg class="css-svg-ln"><line id="id_show_type" x1="10" y1="5" x2="290" y2="5" stroke="white" stroke-width="2" stroke-dasharray="1 0"></line></svg></button>',document.getElementById("id_toolplace_4").innerHTML="")}document.getElementById("id_typebtn_cursor").onclick=function(){TitleOfChoosed.innerHTML=document.getElementById("id_typebtn_cursor").innerHTML,type="cursor",UpdateTools()},document.getElementById("id_typebtn_draw").onclick=function(){TitleOfChoosed.innerHTML=document.getElementById("id_typebtn_draw").innerHTML,type="draw",UpdateTools()},document.getElementById("id_typebtn_point").onclick=function(){TitleOfChoosed.innerHTML=document.getElementById("id_typebtn_point").innerHTML,type="point",UpdateTools()},document.getElementById("id_typebtn_line").onclick=function(){TitleOfChoosed.innerHTML=document.getElementById("id_typebtn_line").innerHTML,type="line",UpdateTools()},document.getElementById("id_typebtn_circle").onclick=function(){TitleOfChoosed.innerHTML=document.getElementById("id_typebtn_circle").innerHTML,type="circle",UpdateTools()},document.getElementById("id_typebtn_rectangle").onclick=function(){TitleOfChoosed.innerHTML=document.getElementById("id_typebtn_rectangle").innerHTML,type="rectangle",UpdateTools()};
